(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"+GZi":function(e,t,a){},"2VrW":function(e,t,a){},"8eKL":function(e,t,a){"use strict";var n=a("mj2O"),r=a.n(n),i=a("7SM1"),c=a("s8DI"),o=a("O94r"),s=a.n(o),l=a("7IKl"),d=a("lE29"),u=a("ERkP"),m=a.n(u),f=a("Tr4L"),g=a("uDfI"),b=(a("I4Wp"),function AgentTypingIndicator(){var e=Object(f.a)().t,t=Object(d.a)().messageAuthorTheme,a=Object(g.c)(function(e){return e.conversations.typingIndicators[e.conversations.activeConversation]||{}}),n=a.isTyping,r=void 0!==n&&n,i=a.userId,c=Object(l.a)(i);return r?m.a.createElement("p",{"aria-live":"polite",style:t,className:"agent-typing-indicator"},e("status.agentTyping",{agent:c})):null}),p=a("HXmn"),v=a("nfbA"),j=a("NJA7"),h=a("pYxh"),O=a("fw6E"),E=a("K7i0"),w=a("+oIK"),y=a("da4L"),N=a("+f1A"),k=a("ADGC"),S=a("0lfv"),T=(a("yAze"),Object(u.lazy)(function(){return Promise.all([a.e(33),a.e(13),a.e(52)]).then(a.bind(null,"RR8A"))})),A=function AgentRequestedOptions(e){var t=e.message,a=Object(f.a)().t,n=t.attributes,o=t.id,l=t.conversationId,b=Object(g.b)(),A=Object(g.c)(function(e){return e.session}).endUser,C=Object(O.a)().conversationHistoryOpen,M=Object(g.c)(function(e){return e.view}).chatOpen,I=Object(u.useState)(void 0),L=Object(c.a)(I,2),R=L[0],x=L[1],P=Object(u.useState)(!M),_=Object(c.a)(P,2),F=_[0],B=_[1],D=Object(u.useState)(!1),G=Object(c.a)(D,2),U=G[0],H=G[1],z=Object(g.c)(N.l),V=Object(y.p)(t),K=Object(k.c)(),Q=Object(d.a)().foregroundStyles,Z=function doSendMessage(e){var a=e.label;return function(){var e=Object(w.a)({message:a,activeConversation:l,authorId:A.id,attributes:{buttonClicked:!0,questionId:t.attributes.questionId,instanceId:z}});b(Object(E.p)({message:e}))}},X=Object(u.useState)(null),Y=Object(c.a)(X,2),q=Y[0],J=Y[1],W={option:function option(e,t){t.data,t.isDisabled;var a=t.isFocused;return t.isSelected,Object(v.a)(Object(v.a)({},e),{},{backgroundColor:a?"#0071EB0D":"white",color:"black",fontSize:"14px"})},placeholder:function placeholder(e){return Object(v.a)(Object(v.a)({},e),{},{fontSize:"14px"})},control:U&&function customControlStyles(e){return Object(v.a)(Object(v.a)({},e),{},{borderColor:"#d0241b",borderRadius:"4px",borderStyle:"solid",borderWidth:"1px",boxShadow:"0 0 0 1px #d0241b",boxSizing:"border-box","&:hover":{borderColor:"#d0241b"}})},menuPortal:function menuPortal(e){return Object(v.a)(Object(v.a)({},e),{},{zIndex:9999})}};Object(u.useLayoutEffect)(function(){var e;function _delayButtons(){return(_delayButtons=Object(i.a)(r.a.mark(function _callee(){return r.a.wrap(function _callee$(t){for(;;)switch(t.prev=t.next){case 0:if(!M||F){t.next=5;break}return e=Object(S.r)(500),t.next=4,e.promise;case 4:B(!0);case 5:case"end":return t.stop()}},_callee)}))).apply(this,arguments)}return function delayButtons(){return _delayButtons.apply(this,arguments)}(),function(){return e&&e.timeout&&clearTimeout(e.timeout)}},[F,M,t]);var $=F?"visible":"hidden";return V?m.a.createElement(h.a,{className:"drift-dropdown-card"},m.a.createElement("div",{className:"drift-dropdown-input-container"},m.a.createElement(u.Suspense,{fallback:m.a.createElement(p.a,{titleId:"AgentRequestedOptionsDropdown"})},m.a.createElement(T,{maxMenuHeight:K?180:280,options:n.buttons,className:"drift-dropdown-input",menuPortalTarget:document.body,menuPosition:"fixed",placeholder:a("composer.dropdownPlaceHolder"),noOptionsMessage:function noOptionsMessage(){return m.a.createElement("div",null,a("composer.noOptionsMessage"))},value:q,onChange:function handleChange(e){x(void 0),J(e);var t=n.buttons.find(function(t){return t.value===e.value});t&&x(t)},styles:W,onInputChange:function localFilter(e){var t=n.buttons.find(function(t){return t.value.includes(e)});H(!(!e||""===e||t))}}))),m.a.createElement("button",{style:R&&Object(v.a)({},Q),disabled:C||!R,onClick:R&&Z(R),className:s()("drift-dropdown-button",{disabled:!R})},a("composer.confirmButton"))):m.a.createElement("ul",{className:"drift-widget-message-group drift-widget-message-group-type--END_USER drift-bot-buttons--set drift-bot-buttons--".concat($)},n.buttons.map(function(e,a){return m.a.createElement("li",{className:"drift-widget-button--list-item","aria-posinset":a+1,key:"bot-button-".concat(o,"-").concat(a)},m.a.createElement(j.a,{onClick:Z(e),invertOnHover:!0,disabled:C,"aria-label":"".concat(e.label," - Reply as a response to ").concat(t.attributes.preview)},e.label))}))},C=a("efbE"),M=a("rAc1"),I=a("l6A5"),L=function urlIdentity(e){return Object(M.a)(e)},R=(Object(I.a)(L,function(e){return C.j.get("/",{params:{url:encodeURI(e)}})}),Object(I.a)(L,function(e){return C.i.get("/",{params:{url:e,iframe:1,omit_script:1,media:1}})})),x=a("YWhp"),P=function Retry(e){var t=e.height,a=void 0===t?24:t,n=e.width,r=void 0===n?24:n;return m.a.createElement(x.a,{className:"drift-default-icon drift-default-icon--retry",width:r,height:a,viewBox:"0 0 28 24"},m.a.createElement("path",{d:"M27.82 19.074c-0.17 0.085-0.353 0.126-0.53 0.126-0.436 0-0.854-0.244-1.063-0.664l-0.994-2.010c-1.762 4.469-5.996 7.474-11.002 7.474-5.438 0-10.298-3.548-11.82-8.628-0.19-0.635 0.164-1.304 0.792-1.496 0.624-0.193 1.29 0.166 1.48 0.8 1.222 4.076 5.148 6.924 9.548 6.924 4.128 0 7.481-2.436 8.838-6.126l-2.372 1.199c-0.588 0.298-1.3 0.056-1.592-0.536s-0.055-1.313 0.53-1.609l4.748-2.401c0.589-0.296 1.301-0.055 1.594 0.538l2.374 4.8c0.294 0.593 0.055 1.314-0.53 1.61zM25.259 10.126c-0.626 0.191-1.291-0.167-1.481-0.802-1.223-4.076-5.148-6.924-9.547-6.924-4.132 0-7.486 2.437-8.842 6.127l2.375-1.201c0.588-0.296 1.301-0.055 1.592 0.538 0.294 0.593 0.056 1.314-0.53 1.61l-4.748 2.399c-0.17 0.086-0.352 0.127-0.529 0.127-0.437 0-0.856-0.242-1.063-0.662l-2.375-4.801c-0.293-0.593-0.055-1.314 0.532-1.61 0.589-0.296 1.3-0.055 1.592 0.538l0.994 2.008c1.759-4.468 5.994-7.471 11.003-7.471 5.436 0 10.296 3.548 11.819 8.628 0.191 0.635-0.164 1.304-0.791 1.498z"}))},_=a("YYte"),F=a("nQD+"),B=a("+Kbs"),D=a("fsHk"),G=function MessageFooter(e){var t=e.message,a=e.isLastGroup,n=e.isLastMessage,r=e.delivered,i=e.generated,o=e.messageTimedOut,l=e.deliveryFailed,d=e.resolveMessageHeight,g=Object(f.a)().t,b=Object(u.useState)(!1),v=Object(c.a)(b,2),j=v[0],h=v[1];if(Object(u.useEffect)(function(){return(o||r)&&Object(S.e)(function(){return h(!1)},500),r||l||j||h(!0),function(){return h(!1)}},[r,o,j,l]),Object(u.useLayoutEffect)(function(){d()},[d,r,j,a,n,l]),!r||j)return m.a.createElement("li",{key:"".concat(i,"-message-status"),className:s()("drift-widget-message drift-widget-message--meta-date drift-no-op",{"drift-widget-message-failed-status":l})},m.a.createElement("span",{"aria-live":l?"polite":"off",className:"drift-widget-message--meta-status"},!j&&l?g("status.sendMessageFailed"):m.a.createElement(p.a,{size:"small",className:"drift-widget-message--meta-status__sending",titleId:"MessageLoading-".concat(t.id)})));if(!a&&!r)return m.a.createElement("li",{key:"".concat(i,"-message-status"),className:"drift-widget-message drift-widget-message--meta-date drift-no-op"});if(n&&a){var O=D.a.unixFormatDateTime(r,g("dt.format.time.short"));return m.a.createElement("li",{key:"".concat(t.createdAt,"-message-status"),className:"drift-widget-message--meta-date drift-widget-message"},m.a.createElement("div",{className:"drift-widget-message--meta-status"},m.a.createElement(B.i,{className:"drift-widget-message-sent",height:12,width:12,title:"Message successfully delivered"}),m.a.createElement("span",{className:"drift-widget-message--meta-date-stamp"},O)))}return null},U=a("QtlZ"),H=a("mZ4K"),z=a("58kB"),V=a("g6eD"),K=a("LVcX"),Q=a("mfas"),Z=a("PjZB"),X=a("BcLd"),Y=a("EQxi"),q=function LazyCard(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p.a;return function(a){return m.a.createElement(u.Suspense,{fallback:m.a.createElement(t,{titleId:"LazyCardLoadingFallback"})},m.a.createElement(e,a))}},J=function(){return m.a.createElement("div",{className:"drift-widget-message--box--loader"},m.a.createElement(p.a,{titleId:"Loading"}))},W=a("q+cq"),$=(a("CHQR"),function DefaultMessage(e){var t=e.body;return m.a.createElement("div",{className:"drift-widget-message--box drift-widget-message--STRING"},t)}),ee=a("9Xg1"),te={BOT:q(Object(u.lazy)(function(){return a.e(43).then(a.bind(null,"qfyu"))}),J),CONVO_RATING:q(Object(u.lazy)(function(){return a.e(44).then(a.bind(null,"6lGB"))}),J),EMAIL_CAPTURE:q(Object(u.lazy)(function(){return a.e(38).then(a.bind(null,"ZJQa"))}),J),HTML:ee.default,LEGACY:q(Object(u.lazy)(function(){return Promise.resolve().then(a.bind(null,"9Xg1"))}),J),MEETING:q(Object(u.lazy)(function(){return a.e(36).then(a.bind(null,"c+1e"))}),function(){return m.a.createElement(W.a,{loadingFrame:!0},m.a.createElement(p.a,{titleId:"MeetingLoader"}))}),SMS_CAPTURE:q(Object(u.lazy)(function(){return a.e(45).then(a.bind(null,"vYZB"))}),J),SMS_SUCCESS:q(Object(u.lazy)(function(){return a.e(46).then(a.bind(null,"oqPC"))}),J),STRING:$},ae=a("UXBQ"),ne=a("vDqi"),re=a.n(ne),ie=a("nJ3u"),ce=a("z24s"),oe=function FileAttachmentMessage(e){var t=e.attachment,a=void 0===t?{}:t,n=e.multi,r=e.senderType,i=void 0===r?Z.d.END_USER:r,c=Object(d.a)(),o=c.activeColor,l=c.agentIconTheme,f=c.buttonStyles,g=c.svgStyles,b=Object(u.useRef)(null),p=Object(ce.a)(b);if(!a.fileName)return null;var v=i===Z.d.END_USER?g:l;return m.a.createElement("a",{href:a.publicUrl,target:"_blank",rel:"nofollow noopener noreferrer",className:s()("drift-widget-message--file",{"keyboard-focused":p}),style:n?f:{},"aria-label":"Download file: ".concat(a.fileName),ref:b},m.a.createElement("style",null,"\n          .drift-widget-message--file.keyboard-focused {\n            ".concat(Object(ie.a)(o,!1),"\n          }\n        ")),m.a.createElement(B.k,{fill:v.fill,width:16,height:16}),m.a.createElement("span",{className:"drift-widget-attachment--filename",title:a.fileName},a.fileName))},se=function ImageAttachmentMessage(e){var t=e.attachment,a=void 0===t?{}:t,n=e.resolveMessageHeight,r=void 0===n?function(){}:n,i=Object(u.useState)(!1),o=Object(c.a)(i,2),l=o[0],f=o[1],g=Object(d.a)().activeColor,b=Object(u.useRef)(null),p=Object(ce.a)(b);return m.a.createElement("a",{href:a.publicUrl,className:s()("drift-widget-attachment--img",{"keyboard-focused":p}),target:"_blank",ref:b,rel:"nofollow noopener noreferrer","aria-label":"Download image: ".concat(a.fileName)},m.a.createElement("style",null,"\n          .drift-widget-attachment--img.keyboard-focused {\n            ".concat(Object(ie.a)(g,!1),"\n          }\n        ")),m.a.createElement("img",{src:a.publicUrl,alt:a.fileName,onLoad:function onLoad(){!l&&r(),!l&&f(!0)}}))},le=(a("Qp3a"),function AttachmentMessage(e){var t=e.attachmentIds,a=void 0===t?[]:t,n=e.resolveMessageHeight,c=e.sentFrom,o=void 0===c?Z.d.END_USER:c,l=Object(g.b)(),f=Object(g.c)(function(e){return e.conversations.attachments}),b=re.a.CancelToken.source(),p=Object(d.a)(),v=p.agentMessageTheme,j=p.endUserMessageTheme,h=o===Z.d.END_USER?j:v;Object(u.useEffect)(function(){var e=a.filter(function(e){return!f[e]}),t=function(){var t=Object(i.a)(r.a.mark(function _callee(){var t,a;return r.a.wrap(function _callee$(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(ae.a)(e,b.token);case 3:t=n.sent,a=t.data,l(Object(E.f)({attachments:a})),n.next=10;break;case 8:n.prev=8,n.t0=n.catch(0);case 10:case"end":return n.stop()}},_callee,null,[[0,8]])}));return function fetchAttachmentsForMessage(){return t.apply(this,arguments)}}();return e.length&&t(),function(){b.cancel()}},[f,a,b,l]);var O=Object(u.useMemo)(function(){return a&&a.map(function(e){return f[e]?function isImage(e){var t=e.mimeType;return/image/.test(t)&&"image/svg+xml"!==t}(f[e])?m.a.createElement(se,{attachment:f[e],key:"drift-widget-attachment--".concat(e),resolveMessageHeight:n}):m.a.createElement(oe,{multi:a.length>1,attachment:f[e],key:"drift-widget-attachment--".concat(e),senderType:o}):null})},[a,f,n,o]);return m.a.createElement("div",{style:h,className:s()("drift-widget-attachment drift-widget-message--box",{"drift-widget-attachment--multi":a&&a.length>1})},O)}),de=(a("mQ2C"),function UnfurlMessage(e){var t=e.unfurlData,a=e.style,n=void 0===a?{}:a,r=e.resolveMessageHeight,i=void 0===r?function(){}:r,c=e.sender,o=t.html,l=t.meta,d=void 0===l?{}:l,f=t.links,b=void 0===f?{}:f,p=t.url,v=void 0===p?"":p,j=t.rel,h=void 0===j?[]:j,O=Object(g.b)();Object(u.useLayoutEffect)(function(){i(),O(Object(V.a)(!0))},[i,o,O]);var E=!!v&&!!d.title,w=!!d.description||!!d.site,y=E&&w,N=Object(K.a)(null,["thumbnail",0],b),k=Object(K.a)(v,["site"],d),S="player"===h[0],T=!S&&N;return Object(u.useMemo)(function(){return T||S||y},[T,S,y])?m.a.createElement("li",{className:"drift-widget-message drift-widget-message--unfurl drift-widget-message-sender--".concat(c)},m.a.createElement("div",{className:s()("drift-widget-message--box drift-widget-message--unfurl-container"),style:n},S&&m.a.createElement("div",{className:"drift-widget-message--unfurl-video",dangerouslySetInnerHTML:{__html:o}}),T&&m.a.createElement("div",{className:"drift-widget-message--unfurl-image"},m.a.createElement("a",{href:v,target:"_blank",rel:"nofollow noopener noreferrer","aria-label":"Go to ".concat(v)},m.a.createElement("img",{alt:"".concat(k," - thumbnail"),src:N.href,onLoad:function onLoad(){O(Object(V.a)(!0))}}))),y&&m.a.createElement("div",{className:"drift-widget-message--unfurl_meta"},d.title&&m.a.createElement("h3",{className:"drift-widget-message--unfurl_title"},m.a.createElement("a",{rel:"noopener noreferrer",target:"_blank",href:v,title:d.title},d.title)),d.description&&m.a.createElement("p",{className:"drift-widget-message--unfurl_description"},d.description),d.site&&m.a.createElement("p",{className:"drift-widget-message--unfurl_site"},d.site)))):null}),ue=(a("ZP32"),function MessageSentTimestamp(e){var t=e.sender,a=e.deliveredAt,n=Object(f.a)().t;return m.a.createElement("span",{className:"drift-widget-message-timestamp drift-widget-message-timestamp--".concat(t)},D.a.unixFormatDateTime(a,n("dt.format.time.short")))}),me=function MessageComponent(e){var t,a=e.message,n=e.nextMessage,r=e.isLastGroup,i=e.isLastMessage,o=e.resolveMessageHeight,l=Object(u.useState)([]),f=Object(c.a)(l,2),b=f[0],p=f[1],j=Object(u.useState)(null),h=Object(c.a)(j,2),O=h[0],w=h[1],N=Object(g.b)(),k=Object(u.useRef)(),T=Object(H.a)(),A=Object(z.a)(T).recipient,C=Object(g.c)(function(e){return Object(K.a)(!1,["embed","configuration","theme","showUnfurl"],e)}),M=Object(d.a)(),I=M.borderStyles,L=M.endUserMessageTheme,x=M.agentMessageTheme,B=function resolveMessageComponent(e){var t=e.attributes,a=t.isBot,n=void 0!==a&&a,r=t.show_email_capture_card,i=t.conversationRating;return r?te.EMAIL_CAPTURE:Object(y.j)(e)?te.MEETING:n?te.BOT:i?te.CONVO_RATING:Object(y.m)(e)?te.SMS_CAPTURE:Object(y.n)(e)?te.SMS_SUCCESS:te.HTML}(a),q=Object(y.i)(a)?Z.d.END_USER:Z.d.AGENT;Object(u.useEffect)(function(){Object(X.a)(null===k||void 0===k?void 0:k.current)},[k]),Object(u.useEffect)(function(){if(!Object(y.d)(a,"instantMeeting")){var e=Object(Y.a)(a.body);e.length&&p(e)}},[a]),Object(u.useEffect)(function(){if(b.length>0){var e=document.createElement("textarea");e.innerHTML=b[0],R(e.value.replace("#61;","")).then(function(e){var t=e.data;w(Object(v.a)(Object(v.a)({},t),{},{url:b[0]}))}).catch(function(e){return Object(S.n)({data:["Failed to unfurl url: ".concat(b[0]),e]})})}},[b]),Object(u.useLayoutEffect)(function(){o(),U.a.dispatch(Object(V.a)(!0))},[o,r]);var J=!!a.attributes.appointmentInfo||!!a.attributes.conversationRating||a.type===Z.e.EMAIL_CAPTURE_CARD||a.contentType===Z.c.SMS_NUMBER_REQUESTED||a.contentType===Z.c.SMS_NUMBER_SUCCESS,W=!!a.body||J,$=C&&O,ee=a.attachments&&a.attachments.length>0;if(!W&&!$&&!ee)return null;var ae=Object(K.a)(null,["createdAt"])(a),ne=Object(K.a)(null,["attributes","generatedAt"])(a),re=Object(K.a)(!1,["failedToSend"])(a),ie=!ae&&D.a.isTimeAfterSeconds(D.a.getCurrentTimeEpoch(),ne,30),ce=!ae&&re,oe=q===Z.d.END_USER?"Sent by: You":"Sent by: ".concat(A.name);return m.a.createElement(m.a.Fragment,null,W&&m.a.createElement("li",{className:s()("drift-widget-message drift-widget-message-sender--".concat(q),{"drift-widget-message-failed":ce}),ref:k},m.a.createElement(B,Object.assign({},a,{isLastGroup:r,isLastMessage:i,nextMessage:n,resolveMessageHeight:o,style:q===Z.d.END_USER?L:x})),m.a.createElement(_.a,{content:oe}),!J&&ae&&m.a.createElement(ue,{sender:q,deliveredAt:ae}),ce&&m.a.createElement(F.a,{"aria-label":'Retry uploading message "'.concat(null!==(t=null===a||void 0===a?void 0:a.body)&&void 0!==t?t:"",'"'),onClick:function doSendMessage(){N(Object(E.p)({message:Object(v.a)(Object(v.a)({},Object(Q.a)(["failedToSend"],a)),{},{attributes:Object(v.a)(Object(v.a)({},a.attributes),{},{generatedAt:(new Date).valueOf()})})}))}},m.a.createElement(P,{height:12,width:12}))),$&&m.a.createElement(de,{unfurlData:O,resolveMessageHeight:o,style:q===Z.d.END_USER?Object(v.a)({},I):{},sender:q}),ee&&m.a.createElement("li",{className:"drift-widget-message drift-widget-message-sender--".concat(q)},m.a.createElement(le,{attachmentIds:a.attachments,resolveMessageHeight:o,sentFrom:q}),m.a.createElement(ue,{sender:q,deliveredAt:ae})),m.a.createElement(G,{message:a,isLastGroup:r,isLastMessage:i,delivered:ae,generated:ne,messageTimedOut:ie,deliveryFailed:ce,resolveMessageHeight:o}))},fe=a("yEsl"),ge=(a("UwV1"),function getAvatarPositionClassName(e){var t=Object(y.j)(e),a=e.attributes.show_email_capture_card;return"message-group-avatar-".concat(void 0!==a&&a||t?"top":"bottom")}),be=function MessageGroupHeader(e){var t=e.senderType,a=e.senderId,n=Object(l.a)(a),r=Object(d.a)().messageAuthorTheme;return t!==Z.d.AGENT?null:m.a.createElement("li",{className:"drift-widget-message-sender"},m.a.createElement("span",{className:"drift-widget-message--meta-author",style:r},n))},pe=function MessageGroup(e){var t=e.messages,a=void 0===t?[]:t,n=e.isLastGroup,r=void 0!==n&&n,i=e.showTimestamp,o=void 0!==i&&i,l=e.role,g=void 0===l?"cell":l,b=e.resolveMessageHeight,p=void 0===b?function(){}:b,v=Object(f.a)().t,j=Object(d.a)().messageTimestampTheme;Object(u.useLayoutEffect)(function(){p()},[p,r,o]);var h=Object(c.a)(a,1)[0],O=Object(y.i)(h)?Z.d.END_USER:Z.d.AGENT,E=h.authorId,w=a[a.length-1],N=r&&Object(y.d)(w,"buttons");return m.a.createElement("div",{role:g,className:s()("drift-widget-message-group-wrapper",{"drift-widget-message-group-wrapper--last":r})},o&&m.a.createElement("p",{className:"drift-widget-message-group-timestamp",style:j},function formatTimestamp(e,t){return e>0?D.a.isTimeSame(e,"date")?"".concat(t("dt.today")," ").concat(D.a.unixFormatDateTime(e,t("dt.format.time.short"))):D.a.unixFormatDateTime(e,t("dt.format.datetime.short")):""}(a[0].createdAt,v)),m.a.createElement("ul",{className:"drift-widget-message-group drift-widget-message-group-type--".concat(O)},m.a.createElement(be,{senderType:O,senderId:E}),a.map(function(e,t){var n=t===a.length-1,i=a[t-1],c=n?null:a[t+1];return i&&i.id===e.id?null:m.a.createElement(u.Fragment,{key:e.attributes.generatedAt||e.id||e.attributes.widgetGuid},n&&O===Z.d.AGENT&&m.a.createElement("li",{className:s()("drift-widget-message-group-avatar",ge(e))},m.a.createElement(fe.a,{id:E,size:"SMALL"})),m.a.createElement(me,{resolveMessageHeight:p,message:e,nextMessage:c,isLastMessage:n,isLastGroup:r}))})),N&&m.a.createElement(A,{message:w}))},ve=a("gRD2"),je=a("fJrp"),he=a("xqp/"),Oe=a("qixE"),Ee=a("xwTo"),we=a("TbSn"),ye=a("XuDI"),Ne=(a("P6Di"),function shouldShowTimestamp(e,t){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e&&!a)return!1;if(!e)return!0;var n=e?e[e.length-1].createdAt:0;return D.a.isTimeAfterHours(t[0].createdAt,n,2)}),ke=function setScrollTop(e,t,a){if(e.scrollTop!==t){var n=e.style;a&&(n["-webkit-overflow-scrolling"]="auto",n.overflow="hidden"),e.scrollTop=t,a&&(n.overflow="scroll",n["-webkit-overflow-scrolling"]="touch")}};t.a=function MessageGroupList(e){var t=e.reflowHidden,a=e.messageGroups,n=e.messages,o=e.disabled,l=void 0!==o&&o,f=e.inheritBackgroundStyle,v=void 0!==f&&f,j=e.showTimestampForFirstGroup,h=void 0===j||j,O=Object(g.b)(),E=Object(d.a)().widgetBackgroundStyles,w=Object(g.c)(Ee.a),N=Object(ve.a)().fetchMessages,T=Object(g.c)(function(e){return e.view}),A=T.chatOpen,C=T.shouldAutoScrollChatToBottom,M=Object(g.c)(function(e){return Object(K.a)({},["conversations","conversations",w],e)}),I=M.hasMoreMessages,L=M.nextPageMessageId,R=Object(k.c)(),x=Object(u.useState)(!0),P=Object(c.a)(x,2),_=P[0],F=P[1],B=Object(u.useState)(!1),D=Object(c.a)(B,2),G=D[0],U=D[1],H=Object(u.useState)(!1),z=Object(c.a)(H,2),X=z[0],Y=z[1],q=Object(u.useState)(!1),J=Object(c.a)(q,2),W=J[0],$=J[1],ee=Object(u.useRef)(null),te=Object(u.useRef)(0),ae=Object(u.useRef)(!1),ne=Object(u.useMemo)(function(){return Object(we.a)(n)},[n]),re=Object(je.a)(ne),ie=!!re&&ne!==re,ce=a.length,oe=!G&&I&&A,se=Object(u.useMemo)(function(){return a.map(function(e,t){var n=t===a.length-1,r=t>0?a[t-1]:null,i=e[0].attributes.widgetGuid||e[0].id;return m.a.createElement(m.a.Fragment,{key:"messageGroup-".concat(i)},m.a.createElement(pe,{role:"listitem",messages:e,isLastGroup:n,showTimestamp:Ne(r,e,h)}),n&&m.a.createElement(b,null))})},[a,h]),le=Object(u.useCallback)(function(){var e=Object(i.a)(r.a.mark(function _callee(e){return r.a.wrap(function _callee$(t){for(;;)switch(t.prev=t.next){case 0:return U(!0),Y(!0),t.next=4,N({from:e});case 4:$(!0),U(!1),Object(S.e)(function(){return Y(!1)},1e3);case 7:case"end":return t.stop()}},_callee)}));return function(t){return e.apply(this,arguments)}}(),[N]),de=Object(u.useCallback)(function(e){e.target.scrollTop<=200&&oe&&!W&&le(L)},[le,L,oe,W]),ue=v?{}:E;Object(he.a)(de,ee),Object(u.useLayoutEffect)(function(){if(!(ce<1)){if(!A||G||t)!A&&ie&&(ae.current=!0);else{var e=Object(K.a)(0,["current","scrollHeight"],ee),a=te.current,n=ie||_||ae.current||C;ee.current&&(n?(ke(ee.current,e,R),ae.current=!1):W&&ke(ee.current,e-a,R)),(n||W)&&(te.current=e),F(!1),$(!1)}C&&O(Object(V.a)(!1))}},[ce,A,_,G,ie,W,t,R,a,C,O]),Object(u.useEffect)(function(){$(!1),F(!0)},[w]),Object(u.useEffect)(function(){ne&&A&&ne.viewerRecipientStatus!==Z.f.READ&&!Object(y.i)(ne)&&Object(Oe.d)(w)},[ne,w,A]);return m.a.createElement("div",{className:"drift-widget-message-group-list-container","aria-hidden":l},m.a.createElement("div",{style:ue,className:s()("drift-widget-message-group-list-loader",{"drift-widget-message-group-list-loader--loading":X})},m.a.createElement(p.a,{visible:X,titleId:"MessageGroupListLoading"})),m.a.createElement(ye.Scrollbars,{ref:function setScrollContainerRef(e){e&&ee&&(ee.current=e.view)},hideTracksWhenNotNeeded:!0,renderView:function renderScrollbarsView(e){var a=Object(Q.a)(["WebkitOverflowScrolling"],e.style);return m.a.createElement("div",Object.assign({},e,{role:"list",style:a,className:s()("drift-widget-message-group-list",{"drift-widget-message-group-list--hidden":t})}))}},se))}},"9Xg1":function(e,t,a){"use strict";a.r(t);var n=a("nfbA"),r=a("O94r"),i=a.n(r),c=a("58kB"),o=a("4bA0"),s=a.n(o),l=a("da4L"),d=a("ERkP"),u=a.n(d),m=a("oPI6"),f=a("PjZB"),g=a("y0on"),b=a("EQxi"),p=/[/.](gif)$/i,v=function HtmlMessage(e){var t=e.body,a=e.attributes,r=e.isLastMessage,l=e.authorId,v=e.isLastGroup,j=e.style,h=void 0===j?{}:j,O=e.resolveMessageHeight,E=void 0===O?function(){}:O,w=e.className,y=e.viewerRecipientStatus,N=e.authorType;Object(d.useLayoutEffect)(function(){E()},[E,t]);var k=Object(c.a)(l).recipient,S=Object(d.useMemo)(function(){return{parsedBody:s()(t,{replace:function replace(e){if("img"===e.name){var t,a,r,i,c=null!==(t=null===(a=e.attribs)||void 0===a?void 0:a.alt)&&void 0!==t?t:"",l=null!==(r=null===(i=e.attribs)||void 0===i?void 0:i.src)&&void 0!==r?r:"",m=new RegExp(p).test(l),f=Object(n.a)(Object(n.a)({},Object(o.attributesToProps)(e.attribs)),{},{onLoad:E});return m&&(f["data-giffer"]=l,f["data-giffer-alt"]=c),u.a.createElement("img",f)}if("text"===e.type){var g,v;if(e.parentNode&&"a"!==e.parentNode.name){var j=Object(b.e)(e.data);return u.a.createElement(u.a.Fragment,null,s()(j))}var h=null!==(g=null===(v=e.data)||void 0===v?void 0:v.split(/[\r\n]+/))&&void 0!==g?g:[];if(h.length>1)return u.a.createElement(u.a.Fragment,null,h.filter(Boolean).map(function(e,t){return u.a.createElement(d.Fragment,{key:t},e,u.a.createElement("br",null))}))}else if("a"===e.name){var O={href:e.attribs.href,target:"_blank",rel:"noopener noreferrer"};return u.a.createElement("a",O,Object(o.domToReact)(e.children))}}})}},[t,E]).parsedBody,T=r&&v&&N===f.b.USER&&y!==f.f.READ,A=T?Object(g.a)(k.name,a&&""!==a.preview?a.preview:t):null;return u.a.createElement("div",{className:i()("drift-widget-message--box drift-widget-message--HTML",w),style:h},T&&u.a.createElement(m.b,{message:A,"aria-live":"polite",clearOnUnmount:!0}),u.a.createElement("div",null,S))};t.default=function(e){return Object(l.h)(e.body)?null:u.a.createElement(v,e)}},"9wXn":function(e,t,a){},Adtm:function(e,t,a){},"BA/U":function(e,t,a){"use strict";a.d(t,"a",function(){return n});var n=function onKeyDownSubmit(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return function(a){(function isEnter(e){return"Enter"===e.key||13===e.keyCode}(a)||t&&function isSpace(e){return"Space"===e.key||32===e.keyCode}(a))&&(a.preventDefault(),e())}}},BNKP:function(e,t,a){},BY8A:function(e,t,a){"use strict";var n=a("s8DI"),r=a("QtlZ"),i=a("Hvhg"),c=a("ERkP"),o=a.n(c),s=a("rTkt");a("zoZM");t.a=function ThemeStyleSheets(){var e=Object(c.useState)(!1),t=Object(n.a)(e,2),a=t[0],l=t[1],d=Object(i.b)(Object(r.b)());return Object(c.useEffect)(function(){a||(Object(s.a)(d),Object(s.b)(d),l(!0))},[d,a]),o.a.createElement("div",{className:"drift-widget-preload-fonts","aria-hidden":"true"},o.a.createElement("span",null,"A"),o.a.createElement("strong",null,"B"))}},CHQR:function(e,t,a){},CwrG:function(e,t,a){"use strict";var n=a("O94r"),r=a.n(n),i=a("+Kbs"),c=a("lE29"),o=a("SFoa"),s=a("LVcX"),l=a("ERkP"),d=a.n(l),u=a("TVEO"),m=a("uDfI"),f=(a("p0+K"),function Drift(){var e=Object(c.a)().footerTextColor,t=Object(s.a)("",["context","page","hostname"],Object(m.c)(function(e){return e.session})),a=Object(l.useMemo)(function(){return Object(o.h)()<=1?"":"?utm_source=".concat(t,"&utm_medium=web-widget&utm_campaign=widget-referral&utm_version=v2")},[t]);return d.a.createElement("a",{href:"https://www.drift.com/powered-by".concat(a),className:"drift-widget-power",rel:"noopener noreferrer",target:"_blank",style:e},d.a.createElement(u.a,{i18nKey:"composer.footer.poweredByDrift",components:[d.a.createElement(i.c,{height:12,width:12}),d.a.createElement("span",{className:"drift-widget-power-brand"},"Drift")]}))}),g=a("VkHq"),b=a("Hvhg");a("2VrW"),t.a=function Footer(){var e=Object(m.c)(b.c).showBranding,t=void 0!==e&&e,a=Object(g.a)(),n=a.privacyPolicyLink,i=a.privacyPolicyLinkText,s=a.noPolicy,l=Object(c.a)().footerTextColor;if(!t&&s)return null;var u=Object(o.m)(i);return d.a.createElement("div",{className:r()("drift-widget-footer",{"drift-widget-footer--with-branding":t})},t&&d.a.createElement(f,null),t&&!s&&d.a.createElement("span",{className:"drift-widget-footer-privacy-spacer","aria-hidden":"true",style:l},"|"),!s&&d.a.createElement("a",{href:n,rel:"noopener noreferrer",target:"_blank",title:i,className:r()("drift-widget-footer-privacy-link",{"long-copy":u}),style:l},i))}},I4Wp:function(e,t,a){},IuzP:function(e,t,a){},JTFN:function(e,t,a){"use strict";a.d(t,"a",function(){return n});var n=["ja","ko"]},JhcM:function(e,t,a){},Jrg8:function(e,t,a){},KA4J:function(e,t,a){"use strict";a.d(t,"b",function(){return c}),a.d(t,"a",function(){return o});var n=a("efbE"),r=["en","es","pt","id","fr","ar","tr","th","vi","de","it","ja","zh-CN","zh-TW","ru","ko","pl","nl","ro","hu","sv","cs","hi","bn","da","fa","tl","fi","iw","ms","no","uk"],i=function localeToGiphyLang(e){switch(e){case"de-DE-formal":return"de";case"zh":return"zh-CN";case"zh-HK":return"zh-TW";case"pt-BR":return"pt"}return r.includes(e)?e:"en"},c=function fetchTrendingGifs(e){return n.g.get("/trending",{params:{limit:e,rating:"pg"}})},o=function fetchGifs(e,t){var a=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).locale;return n.g.get("/search",{params:{limit:t,q:e,lang:i(a),rating:"pg"}})}},Lzfp:function(e,t,a){"use strict";var n=a("jm9a"),r=a("O94r"),i=a.n(r),c=a("+Kbs"),o=a("ERkP"),s=a.n(o),l=(a("eSyn"),function SearchLabel(e){var t=e.ariaLabel,a=void 0===t?"":t,r=e.ariaLabelledBy,o=void 0===r?"":r,l=e.className,d=void 0===l?"":l,u=e.htmlFor,m=void 0===u?"":u;return s.a.createElement("label",{"aria-label":a,"aria-labelledby":o,className:i()("drift-widget--search-label",Object(n.a)({},d,!!d)),htmlFor:m,id:"driftWidgetSearchLabel"},s.a.createElement(c.o,{titleId:o,title:a,width:12,height:12}))});a.d(t,"a",function(){return l})},Mur8:function(e,t,a){"use strict";a.d(t,"a",function(){return n});var n=[{emoji:"\ud83d\ude20",value:1},{emoji:"\ud83d\ude41",value:2},{emoji:"\ud83d\ude10",value:3},{emoji:"\ud83d\ude0a",value:4},{emoji:"\ud83e\udd29",value:5}]},P6Di:function(e,t,a){},"PGb/":function(e,t,a){},Q80r:function(e,t,a){},Qp3a:function(e,t,a){},RJSH:function(e,t,a){},UXBQ:function(e,t,a){"use strict";a.d(t,"b",function(){return r}),a.d(t,"a",function(){return i});var n=a("efbE"),r=function uploadAttachment(e,t){var a=new FormData;return a.append("conversationId",t),a.append("file",e),n.a.post("/attachments",a)},i=function fetchAttachments(e,t){return n.a.get("/attachments",{params:{id:e},cancelToken:t})}},UwV1:function(e,t,a){},YYte:function(e,t,a){"use strict";a.d(t,"a",function(){return InvisibleContent});var n=a("hX/4"),r=a("ERkP"),i=a.n(r),c=(a("fpMl"),{label:function label(e){return i.a.createElement("label",Object.assign({htmlFor:e.htmlFor},e))},span:function span(e){return i.a.createElement("span",e)}});function InvisibleContent(e){var t=e.content,a=void 0===t?"":t,r=e.type,o=void 0===r?"span":r,s=Object(n.a)(e,["content","type"]),l=c[o];return i.a.createElement(l,Object.assign({className:"visually-hidden"},s),a)}},ZGTz:function(e,t,a){"use strict";var n=a("mj2O"),r=a.n(n),i=a("7SM1"),c=a("s8DI"),o=a("O94r"),s=a.n(o),l=a("HXmn"),d=a("SFoa"),u=a("ERkP"),m=a.n(u),f=a("Tr4L"),g=a("uDfI"),b=a("oFTC"),p=(a("uqJV"),a("Q80r"),Object(u.lazy)(function(){return Promise.all([a.e(10),a.e(50)]).then(a.bind(null,"tBak"))})),v=function EmojiPickerLoader(e){var t=e.loadingText;return m.a.createElement("div",{className:"drift-widget-emoji-picker--loader"},m.a.createElement("p",null,t),m.a.createElement(l.a,{titleId:"EmojiPicker"}))};t.a=function EmojiPicker(e){var t=e.open,n=e.onAddEmoji,o=e.onClickOutside,l=Object(f.a)().t,j=Object(g.c)(function(e){return e.conversations}).activeConversation,h="en"!==Object(d.f)(),O=Object(u.useMemo)(function(){return function createEmojiMartI18nProp(e){return{search:e("emoji.search"),clear:e("emoji.clear"),notfound:e("emoji.notfound"),skintext:e("emoji.skintext"),categories:{search:e("emoji.category.search"),recent:e("emoji.category.recent"),smileys:e("emoji.category.smileys"),people:e("emoji.category.smileys"),nature:e("emoji.category.nature"),foods:e("emoji.category.foods"),activity:e("emoji.category.activity"),places:e("emoji.category.places"),objects:e("emoji.category.objects"),symbols:e("emoji.category.symbols"),flags:e("emoji.category.flags"),custom:e("emoji.category.custom")},categorieslabel:e("emoji.categorieslabel"),skintones:{1:e("emoji.skintone1"),2:e("emoji.skintone2"),3:e("emoji.skintone3"),4:e("emoji.skintone4"),5:e("emoji.skintone5"),6:e("emoji.skintone6")}}}(l)},[l]),E=Object(u.useRef)(null),w=Object(u.useState)(null),y=Object(c.a)(w,2),N=y[0],k=y[1];Object(u.useEffect)(function(){t&&!N&&function(){var e=Object(i.a)(r.a.mark(function _callee(){return r.a.wrap(function _callee$(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.e(54).then(a.t.bind(null,"8ozv",3)).then(function(e){return k(e.default)});case 2:case"end":return e.stop()}},_callee)}));return function fetchEmojiData(){return e.apply(this,arguments)}}()()},[t,N]),Object(b.a)(E,function(e){o(e)});return m.a.createElement("div",{ref:E,className:s()("drift-widget-composer-emoji-picker",{"drift-widget-composer-emoji-picker--open":t,"drift-widget-composer-emoji-picker--full":j,"drift-widget-composer-emoji-picker--mini":!j,"drift-widget-composer-emoji-picker--hide-search":h})},m.a.createElement(u.Suspense,{fallback:m.a.createElement(v,{loadingText:l("status.loading")})},!!N&&m.a.createElement(p,{darkMode:!1,hideSearch:h,onSelect:function addEmojiToMessage(e){var t=e.native;n(function(e){return"".concat(e," ").concat(t)})},sheetSize:64,set:"apple",data:N,exclude:["flags","symbols","objects"],perLine:6,emojiTooltip:!h,i18n:O,showPreview:!1,showSkinTones:!1,onClickOutside:o})))}},ZP32:function(e,t,a){},alO1:function(e,t,a){"use strict";a.d(t,"a",function(){return FileAttachmentErrorBanner});var n=a("+Kbs"),r=a("nQD+"),i=a("ERkP"),c=a.n(i),o=a("Tr4L"),s=a("vwUF");function FileAttachmentErrorBanner(e){var t=e.attachmentState,a=e.clearFiles,l=e.disabled,d=e.reset,u=Object(i.useRef)(null),m=Object(o.a)().t;Object(i.useEffect)(function(){u.current&&u.current.focus()},[u]);return c.a.createElement("div",{className:"drift-widget-attachment-send-status drift-widget-attachment-send-status--failed"},c.a.createElement("span",{ref:u,tabIndex:-1,"aria-live":"assertive",className:"drift-widget-attachment-send-status--text"},m(t===s.b.SIZE_ERROR?"attachment.errorSize":"attachment.error")),c.a.createElement(r.a,{"aria-label":"Failed to upload attachment. Close error message.",onClick:function handleOnClick(){d(),a()},className:"drift-widget-attachment-send-status--close",disabled:l},c.a.createElement(n.j,{width:10,height:10})))}},eSyn:function(e,t,a){},fTFZ:function(e,t,a){"use strict";var n=a("nfbA"),r=a("WwEg"),i=a("s8DI"),c=a("O94r"),o=a.n(c),s=a("ZGTz"),l=a("Lzfp"),d=a("+Kbs"),u=a("zJmF"),m=a("jm9a"),f=a("ERkP"),g=a.n(f);function NotFound(e){var t=e.className,a=void 0===t?"":t,n=e.copy,r=void 0===n?"":n;return g.a.createElement("span",{"aria-live":"polite",className:o()("not-found",Object(m.a)({},a,!!a))},r)}var b=a("HXmn"),p=a("krLb"),v=a("nvPd"),j=a("jITz"),h=a("97O6"),O=a.n(h),E=a("Tr4L"),w=a("ADGC"),y=a("oFTC"),N=a("0lfv"),k=a("L3eC");a("Adtm");function GiphyPreview(e){var t,a,n,r,i,c=e.addGiphyToMessage,o=e.giphy,s=null!==(t=null===o||void 0===o?void 0:o.title)&&void 0!==t?t:"Gif from Giphy";return g.a.createElement("li",{className:"drift-widget-composer-giphy-list-item"},g.a.createElement("button",{"aria-label":s,className:"giphy-button",onClick:function handleOnClick(){return c(o)}},g.a.createElement("img",{alt:s,"aria-label":s,className:"giphy-animated",src:null===o||void 0===o?void 0:null===(a=o.images)||void 0===a?void 0:null===(n=a.preview_gif)||void 0===n?void 0:n.url}),g.a.createElement("img",{alt:s,"aria-label":s,className:"giphy-still",src:null===o||void 0===o?void 0:null===(r=o.images)||void 0===r?void 0:null===(i=r.original_still)||void 0===i?void 0:i.url})))}a("RJSH");var S=function GiphyPicker(e){var t=e.onAddGiphy,a=e.disabled,n=void 0!==a&&a,r=Object(E.a)().t,c=Object(f.useState)(!1),s=Object(i.a)(c,2),m=s[0],h=s[1],S=Object(f.useState)(!1),T=Object(i.a)(S,2),A=T[0],C=T[1],M=Object(f.useRef)(null),I=Object(f.useRef)(null),L=Object(v.a)(""),R=L.value,x=L.onChange,P=Object(j.a)({targetKey:"Escape"}),_=Object(w.c)(),F=Object(p.b)(m),B=F.isLoading,D=F.trendingGiphys,G=Object(p.a)(R,m),U=G.debouncedValue,H=G.isSearchLoading,z=G.searchedGiphys,V=Object(N.m)(U)?D:z;Object(y.a)(M,function(){m&&(h(!1),Object(k.a)(null===I||void 0===I?void 0:I.current),C(!0))}),Object(f.useEffect)(function(){m&&P&&h(!1)},[P,m]),Object(f.useEffect)(function(){if(A){var e=window.setTimeout(function(){C(!1)},200);return function(){window.clearTimeout(e)}}},[A]);var K=Object(f.useCallback)(function(e){var a,n=e.images,r=e.title;t("\n      <img\n        alt=".concat(void 0===r?"gif":r,'\n        src="').concat(null===n||void 0===n?void 0:null===(a=n.original)||void 0===a?void 0:a.url,'"\n      />\n    ')),h(!1),Object(k.a)(null===I||void 0===I?void 0:I.current)},[t]),Q=B||H,Z=!Q&&!!U&&Object(N.m)(z),X=!Q&&!Object(N.m)(V);return g.a.createElement(g.a.Fragment,null,g.a.createElement("button",{className:"drift-widget-composer-giphy-toggle",onClick:function openGiphy(e){if(A)return e.preventDefault();h(function(e){return!e})},"aria-label":"".concat(m?"close":"open"," GIF picker"),"aria-expanded":m,disabled:n},g.a.createElement(d.m,null)),g.a.createElement("div",{"aria-expanded":m,tabIndex:-1,className:o()("drift-widget-composer-giphy-picker",{"drift-widget-composer-giphy-picker--show":m,"drift-widget-composer-giphy-picker--mobile":_}),ref:M},g.a.createElement("div",{className:"drift-widget-composer-giphy-picker-search"},g.a.createElement(l.a,{ariaLabel:"Search for a GIF",ariaLabelledBy:"searchGIF",className:"drift-widget--giphy-picker-search-label",htmlFor:"giphy-picker-search"}),g.a.createElement(u.a,{type:"search",placeholder:r("gifPicker.searchPlaceholder"),value:R,onChange:x,onFocus:function onInputFocus(e){_&&e.stopPropagation()},"aria-label":"Search GIFs","aria-live":"polite",id:"giphy-picker-search",shouldFocus:m&&!_}),!!R&&g.a.createElement("button",{"aria-label":"Clear GIF search field",className:"drift-widget--giphy-picker-search-clear",onClick:function clearInput(){x(null)}},g.a.createElement(d.j,null))),g.a.createElement("div",{className:"drift-widget-composer-giphy-picker-list-wrapper"},Q&&g.a.createElement(b.a,{titleId:"GiphyPicker"}),Z&&g.a.createElement(NotFound,{className:"not-found--giphys",copy:"No gifs found"}),X&&g.a.createElement("ul",{className:"drift-widget-composer-giphy-list"},V.map(function(e,t){return g.a.createElement(GiphyPreview,{addGiphyToMessage:K,giphy:e,key:"".concat(e.id,"-").concat(t)})}))),g.a.createElement("span",{className:"drift-widget-composer-giphy-picker-power"},g.a.createElement("img",{src:O.a,alt:r("gifPicker.poweredBy")}))))},T=a("908p"),A=a("YYte"),C=a("P+wr"),M=a("vLHT"),I=a("hiXw"),L=a("Za8o"),R=a("z24s"),x=a("6rzO"),P=a("8/1l"),_=a("lE29"),F=a("uQkC"),B=a("bYXQ"),D=a("Hvhg"),G=a("+oIK"),U=a("LVcX"),H=a("ovDp"),z=a("uDfI"),V=a("vwUF"),K=a("Nqd4"),Q=a("Re5R");a("iaVW");function AdditionalSettings(e){var t=e.disabled,a=e.setUseEnter,n=e.useEnter,r=Object(f.useRef)(),c=Object(f.useRef)(),o=Object(E.a)().t,s=Object(K.a)(),l=Object(i.a)(s,2),d=l[0],u=l[1],m=Object(j.a)({targetKey:"Escape"});Object(y.a)(c,u),Object(f.useEffect)(function(){d&&m&&u()},[m,u,d]);var b=function handleOnChange(e){Object(N.n)({type:"log",data:["AdditionalSettings","ModifiedEnterBehaviour:"+e],internal:!0}),a()};return g.a.createElement(g.a.Fragment,null,g.a.createElement("button",{"aria-hidden":t,"aria-label":"".concat(d?"close":"open"," composer settings"),className:"drift-widget-composer-additional-settings","aria-expanded":d,disabled:t,onClick:function handleSettingsGearClicked(){Object(N.n)({type:"log",data:["AdditionalSettings","SettingsGearClicked"],internal:!0}),u()},ref:r},g.a.createElement(Q.a,{"aria-hidden":!0})),d&&g.a.createElement("fieldset",{className:"drift-widget-composer-additional-settings--overlay",ref:c},g.a.createElement("span",null,o("composer.additionalSetings.press")," ",g.a.createElement("span",{className:"keyboard-key"},o("composer.additionalSetings.enter"))," ",o("composer.additionalSetings.to")),g.a.createElement("label",{htmlFor:"sendIt"},g.a.createElement("input",{id:"sendIt",type:"radio",onChange:function onChange(){return b("sendMessage")},checked:n,"aria-checked":n,name:"settings"}),o("composer.additionalSetings.sendIt")),g.a.createElement("label",{htmlFor:"newLine"},g.a.createElement("input",{id:"newLine",type:"radio",onChange:function onChange(){return b("newLine")},checked:!n,"aria-checked":!n,name:"settings"}),o("composer.additionalSetings.newLine"))))}function AttachmentIconButton(e){var t=e.isDisabled,a=e.open;return g.a.createElement("button",{"aria-label":"Add an attachment",className:"drift-widget-composer-file-attachment",disabled:t,onClick:a},g.a.createElement(d.a,null))}a("alO1"),a("IuzP");a.d(t,"a",function(){return Z});var Z,X="GIF",Y="TEXT",q=function validateMessageText(e){return!Object(N.m)(e)&&e.trim().length>0};!function(e){e[e.AVAILABLE=0]="AVAILABLE",e[e.AVAILABLE_BUTTONS=1]="AVAILABLE_BUTTONS",e[e.UNAVAILABLE=2]="UNAVAILABLE",e[e.UNAVAILABLE_BUTTONS=3]="UNAVAILABLE_BUTTONS"}(Z||(Z={}));t.b=g.a.memo(function Composer(e){var t=e.disabled,c=void 0!==t&&t,l=e.chatHidden,u=e.alwaysShowSendAction,m=void 0!==u&&u,p=e.useGifPicker,v=void 0===p||p,j=e.alwaysShow,h=void 0!==j&&j,O=Object(w.c)(!0),y=Object(f.useRef)(null),k=Object(f.useRef)(null),K=Object(M.a)(),Q=Object(P.a)(),J=Object(I.a)(),W=Object(i.a)(J,2),$=W[0],ee=W[1],te=Object(f.useState)(""),ae=Object(i.a)(te,2),ne=ae[0],re=ae[1],ie=Object(f.useState)(!1),ce=Object(i.a)(ie,2),oe=ce[0],se=ce[1],le=Object(R.a)(y),de=Object(f.useState)([]),ue=Object(i.a)(de,2),me=ue[0],fe=ue[1],ge=Object(z.c)(function(e){return e.view}),be=ge.matchedHours,pe=ge.chatOpen,ve=Object(z.c)(function(e){return e.conversations.attachments}),je=Object(z.c)(function(e){return e.conversations.activeConversation}),he=Object(z.c)(function(e){return e.session.endUser.id}),Oe=Object(z.c)(function(e){return Object(U.a)(!1,["embed","configuration","theme"],e)}).allowEndUserFileUpload,Ee=Object(z.c)(D.h),we=v&&Ee,ye=Object(E.a)().t,Ne=Object(_.a)(),ke=Ne.activeColor,Se=Ne.composerTheme,Te=Ne.composerButtonHoverColor,Ae=Object(x.a)({inputRef:y}),Ce=Ae.pastedFiles,Me=Ae.clearFiles,Ie=Object(F.a)({activeConversationId:je}),Le=Ie.sendTypingStarted,Re=Ie.sendTypingFinished,xe=Object(C.a)({activeConversation:je,onAttachmentUploadComplete:Object(f.useCallback)(function onAttachmentUploadComplete(e){fe(function(t){return[].concat(Object(r.a)(t),Object(r.a)(e))}),Me()},[])}),Pe=xe.attachmentState,_e=xe.uploadAttachments,Fe=xe.resetAttachmentState,Be=K===Z.AVAILABLE||K===Z.AVAILABLE_BUTTONS,De=Object(f.useMemo)(function(){return!h&&(c||!Be)},[h,c,Be]),Ge=Object(H.a)({onDrop:_e,disabled:c||!Be||!Oe}),Ue=Ge.getRootProps,He=Ge.getInputProps,ze=Ge.open,Ve=q(ne)||!Object(N.m)(me),Ke=Pe===V.b.PENDING,Qe=Pe===V.b.ERROR||Pe===V.b.SIZE_ERROR,Ze=c||!Be||!!Ce.length;var Xe=function needToSend(e){return $&&("Enter"===e.key||13===e.keyCode)||!$&&e.shiftKey&&"Enter"===e.key},Ye=Object(f.useCallback)(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Y,a=me?{attachments:me}:{},r=je?{}:{sentWelcomeMessage:be};Re();var i=t===Y?Object(N.s)(e):e;Q({message:Object(G.a)(Object(n.a)({message:i,activeConversation:je||null,authorId:he,attributes:r},a))}),re(""),fe([]),Fe(),function setFocusOnComposer(){y.current.focus(),y.current.classList.remove("focus-visible")}()},[je,he,be,Fe,Q,Re,me]);Object(f.useEffect)(function(){Oe?Ce.length&&!Ke&&_e(Ce):Me()},[Oe,Ke,Me,Ce,_e]),Object(f.useEffect)(function(){je&&re("")},[je]),Object(L.a)(y,pe&&Be&&!l&&K===Z.AVAILABLE);var qe=Object(f.useMemo)(function(){return ye(Be?"composer.replyToPlaceholder":K===Z.UNAVAILABLE_BUTTONS?"composer.chooseOptionAbove":"composer.replyDisabled")},[Be,K,ye]),Je=Oe&&!Object(B.c)(je),We=we&&!Ve&&!!je,$e=m||!we||Ve,et=Je||$e||We,tt=c||!Ve||Ke,at=Object(f.lazy)(function(){return a.e(42).then(a.bind(null,"B2YN"))});return g.a.createElement(g.a.Fragment,null,(me.length||Ke||Qe)&&g.a.createElement(f.Suspense,{fallback:g.a.createElement(b.a,{titleId:"AttachmentPreviews"})},g.a.createElement(at,{activeColor:ke,attachments:ve,attachmentError:Qe,attachmentState:Pe,attachmentUploadPending:Ke,clearFiles:Me,composerDisabled:c,resetAttachmentState:Fe,setUploadedAttachments:fe,uploadedAttachments:me})),g.a.createElement("style",null,"\n          .drift-widget-composer--default button:hover > svg path {\n            fill: ".concat(Te,"\n          }\n        ")),g.a.createElement("div",Object.assign({},Ue({onClick:function onClick(e){return e.stopPropagation()}}),{className:o()("drift-widget-composer--default",{"drift-widget-composer--mobile":O,"drift-widget-composer--hidden":De}),tabIndex:void 0}),Oe&&g.a.createElement("input",He()),g.a.createElement("div",{className:"drift-widget-composer--text-area"},g.a.createElement("pre",null,Be&&ne.length?ne:" "),g.a.createElement(A.a,{content:qe,htmlFor:"drift-widget-composer-input",type:"label"}),g.a.createElement("textarea",{className:o()("drift-widget-input js-focus-visible--controlled",{"keyboard-focused--outlined":le}),ref:y,placeholder:qe,value:Be?ne:"",onChange:function onTextareaChange(e){Ce.length||(re(e.target.value),Le())},onKeyDown:function handleTextareaKeydown(e){Xe(e)&&(e.preventDefault(),(q(ne)||me.length)&&Ye(ne,Y))},onKeyUp:function handleTextareaKeyUp(e){Xe(e)&&re("")},"aria-label":qe||"reply to bot, message composer",maxLength:4096,disabled:Ze,id:"drift-widget-composer-input",style:Se}),Be&&!O&&g.a.createElement("button",{className:"drift-widget-composer-emoji-toggle",onClick:function onEmojiButtonClick(){Ze||se(!oe)},disabled:c,"aria-expanded":oe,"aria-label":"".concat(oe?"close":"open"," emoji picker")},g.a.createElement(d.l,null))),Be&&!O&&g.a.createElement(s.a,{open:oe,onAddEmoji:function onAddEmoji(e){se(!oe),Be&&!c&&(re(e),y.current&&y.current.focus())},onClickOutside:function onEmojiPickerClickOutside(){se(!1)}}),Be&&et&&g.a.createElement("div",{className:o()("drift-widget-composer-actions",{"drift-widget-composer-actions-expanded":Je&&(We||$e)})},We&&g.a.createElement(S,{onAddGiphy:function onAddGiphy(e){return Ye(e,X)},disabled:c}),Je&&g.a.createElement(AttachmentIconButton,{isDisabled:c,open:ze}),!O&&g.a.createElement(AdditionalSettings,{disabled:c,setUseEnter:ee,useEnter:$}),$e&&g.a.createElement("button",{className:o()("drift-widget-composer-send-button",{"drift-widget-composer-send-button--disabled":tt}),"aria-label":"send message",onClick:function onClick(){return Ye(ne,Y)},disabled:tt||Ke,ref:k},g.a.createElement(T.a,{color:"#".concat(ke)})))))})},fpMl:function(e,t,a){},iaVW:function(e,t,a){},mQ2C:function(e,t,a){},"p0+K":function(e,t,a){},pYxh:function(e,t,a){"use strict";var n=a("O94r"),r=a.n(n),i=a("ERkP"),c=a.n(i);a("vYbd");t.a=function Card(e){return c.a.createElement("div",Object.assign({},e,{className:r()("drift-widget-card",e.className),tabIndex:-1}),e.children)}},"q+cq":function(e,t,a){"use strict";var n=a("O94r"),r=a.n(n),i=a("pYxh"),c=a("rmQ0"),o=a("ey6Y"),s=a("ERkP"),l=a.n(s),d=a("Tr4L");t.a=function MeetingSchedulerCard(e){var t=e.agentId,a=e.additionalAgents,n=void 0===a?[]:a,s=e.children,u=e.duration,m=e.showRecipients,f=void 0!==m&&m,g=e.loadingFrame,b=void 0!==g&&g,p=Object(d.a)().t,v=Object(o.a)(t,n),j=p("meeting.scheduleAMeeting");f&&t&&(j=p("meeting.scheduleAMeetingWith",{recipients:v}));var h=b?{}:{minHeight:"350px"};return l.a.createElement(i.a,{"aria-label":j,className:r()("drift-meeting-scheduler",{"drift-meeting-scheduler--loader":b}),style:h},l.a.createElement(c.a,{className:"drift-meeting-scheduler--header"},l.a.createElement("span",null,j),u&&l.a.createElement("span",null,p("meeting.duration",{duration:u}))),l.a.createElement("div",{className:"drift-meeting-scheduler--content"},s))}},rmQ0:function(e,t,a){"use strict";var n=a("nfbA"),r=a("O94r"),i=a.n(r),c=a("lE29"),o=a("ERkP"),s=a.n(o);a("9wXn");t.a=function CardHeader(e){var t=Object(c.a)().cardHeaderTheme;return s.a.createElement("header",Object.assign({},e,{className:i()("drift-widget-card-header",e.className),style:Object(n.a)(Object(n.a)({},t),e.style)}),s.a.createElement("div",{className:"drift-widget-card-header--content"},e.children))}},slYP:function(e,t,a){"use strict";var n=a("s8DI"),r=a("O94r"),i=a.n(r),c=a("rmQ0"),o=a("+Kbs"),s=a("nQD+"),l=a("hX/4"),d=a("ZGTz"),u=a("ERkP"),m=a.n(u),f=a("ADGC"),g=(a("+GZi"),function TextArea(e){var t=e.value,a=e.onValueChange,r=Object(l.a)(e,["value","onValueChange"]),c=Object(f.c)(!0),g=Object(u.useState)(!1),b=Object(n.a)(g,2),p=b[0],v=b[1],j=Object(u.useRef)(null),h=Object(u.useRef)(null);return m.a.createElement(m.a.Fragment,null,!c&&m.a.createElement(d.a,{open:p,onAddEmoji:function onAddEmoji(e){v(!p),r.disabled||(a&&a(e),h.current&&h.current.focus())},onClickOutside:function onEmojiPickerClickOutside(e){j.current&&j.current.contains(e.target)||v(!1)}}),m.a.createElement("div",{className:"drift-widget-textarea"},m.a.createElement("pre",null,t&&t.length?t:" "),m.a.createElement("textarea",Object.assign({},r,{className:i()("drift-widget-input",r.className),value:t,ref:h,onChange:function onTextAreaChange(e){a&&a(e.target.value),r.onChange&&r.onChange(e)},disabled:r.disabled})),!r.disabled&&!c&&m.a.createElement(s.a,{ref:j,className:"drift-widget-textarea--emoji-toggle",onClick:function onEmojiButtonClick(){r.disabled||v(!p)},disabled:r.disabled,"aria-expanded":p,"aria-label":"emojis"},m.a.createElement(o.l,null))))}),b=a("Mur8"),p=a("jITz"),v=a("fJrp"),j=a("lE29"),h=a("K7i0"),O=a("+oIK"),E=a("da4L"),w=a("Tr4L"),y=a("uDfI"),N=a("PjZB");a("Jrg8"),t.a=function RateConversation(e){var t=e.message,a=Object(w.a)().t,r=Object(j.a)(),l=r.activeColor,d=r.conversationRatingCloseButtonTheme,f=r.conversationRatingHeaderTheme,k=r.conversationRatingBodyTheme,S=r.composerTheme,T=Object(v.a)(t),A=Object(y.b)(),C=Object(y.c)(function(e){return e.session}).endUser,M=Object(u.useState)(!0),I=Object(n.a)(M,2),L=I[0],R=I[1],x=Object(u.useState)(""),P=Object(n.a)(x,2),_=P[0],F=P[1],B=Object(u.useState)(0),D=Object(n.a)(B,2),G=D[0],U=D[1],H=Object(u.useMemo)(function(){return Object(E.a)(t,"ratingPrompt")},[t]),z=H.ratingPromptMessage,V=H.ratingAcknowledgement,K=Object(p.a)({targetKey:"Enter"}),Q=Object(u.useCallback)(function(){var e=Object(O.a)({message:"",activeConversation:t.conversationId,authorId:C.id,attributes:{conversationRating:{ratingPrompt:{ratingAcknowledgement:V,ratingPromptMessage:z.trim()},ratingValue:G,ratingText:_}},contentType:N.c.BOT_CONVERSATION_RATING,type:N.e.BOT_CONVERSATION_RATING});A(Object(h.p)({message:e})),R(!1)},[t,A,C.id,V,z,_,G]);Object(u.useEffect)(function(){K&&function isValidMessage(e){return e&&e.trim().length>0}(_)&&Q()},[K,_,Q]),Object(u.useEffect)(function(){T&&T!==t&&!L&&R(!0)},[t,T,L]);var Z=Object(u.useMemo)(function(){return b.a.map(function(e){var t=e.emoji,a=e.value;return m.a.createElement(s.a,{className:i()("drift-widget-rate-conversation--rating",{"drift-widget-rate-conversation--rating--selected":a===G}),key:"rating_".concat(a),"aria-label":"rate ".concat(a),onClick:function onClick(){return U(a)}},t)})},[G]);if(!L)return null;return m.a.createElement(m.a.Fragment,null,m.a.createElement("div",{className:"drift-widget-rate-conversation--cover"}),m.a.createElement("div",{className:"drift-widget-rate-conversation"},m.a.createElement(c.a,{style:f},m.a.createElement("span",null,z),m.a.createElement(s.a,{className:"drift-widget-rate-conversation--close-button","aria-label":"close rating",onClick:function onClick(){return R(!1)}},m.a.createElement(o.j,{width:20,height:20,fill:d.color}))),m.a.createElement("div",{className:"drift-widget-rate-conversation--body",style:k},m.a.createElement("div",{className:"drift-widget-rate-conversation--ratings"},Z),!!G&&m.a.createElement("div",{className:"drift-widget-rate-conversation--composer"},m.a.createElement("div",{className:"drift-widget-rate-conversation--actions"},m.a.createElement(s.a,{className:"drift-widget-rate-conversation--send-button",onClick:Q},m.a.createElement(o.p,{color:"#".concat(l)}))),m.a.createElement(g,{"aria-label":"rating input",maxLength:4096,placeholder:a("form.placeholder.tellUsMore"),onValueChange:function onTextAreaValueChange(e){K||F(e)},value:_,style:S})))))}},vYbd:function(e,t,a){},vkRn:function(e,t,a){"use strict";var n=a("O94r"),r=a.n(n),i=a("BA/U"),c=a("noex"),o=a("yEsl"),s=a("MQZS"),l=a("fw6E"),d=a("hhdZ"),u=a("58kB"),m=a("6fy/"),f=a("SsZN"),g=a("Wjfv"),b=a("K7i0"),p=a("fsHk"),v=a("da4L"),j=a("LVcX"),h=a("i9gz"),O=a("ERkP"),E=a.n(O),w=a("Tr4L"),y=a("uDfI"),N=(a("JhcM"),/\r?\n|\r/g),k=function ConversationHistoryListItem(e){var t,a,n=e.conversation,r=void 0===n?{}:n,k=Object(l.a)().onToggleConversationHistory,S=Object(w.a)().t,T=Object(y.b)(),A=Object(m.a)(),C=Object(O.useMemo)(function(){return Object(j.a)(null,["conversation","id"],r)},[r]),M=Object(d.a)(C),I=Object(O.useMemo)(function(){return Object(j.a)(null,["authorId"],M)},[M]),L=Object(u.a)(I).recipient,R=Object(v.i)(M),x=Object(s.a)(I,L.bot,R),P=function toggleConversation(e){return function(){e&&(k(!1),T(Object(g.a)()),T(Object(b.q)({conversationId:e})),Object(f.f)(e))}};if(Object(h.a)(M))return null;var _=M.createdAt,F=M.attributes,B=void 0===F?{}:F,D=_||(null===B||void 0===B?void 0:B.generatedAt),G=p.a.isTimeToday(D),U=G?p.a.unixFormatDateTime(D,S("dt.format.time.short")):p.a.unixFormatDateTime(D,S("dt.format.date.short")),H=R?A.name:L.name,z=!!(null===B||void 0===B?void 0:null===(t=B.preview)||void 0===t?void 0:null===(a=t.replace(N,""))||void 0===a?void 0:a.trim()),V="".concat(G?"today at ".concat(U):"on ".concat(U)),K="".concat(z?"Conversation preview: ".concat(B.preview,"."):""),Q="Agent ".concat(H," is currently ").concat(x,". "),Z="".concat(Q," Click to open conversation with ").concat(H," ").concat(V,". ").concat(K);return E.a.createElement("li",{className:"drift-widget-conversation-list-item"},E.a.createElement("div",{"aria-label":Z,className:"drift-widget-conversation-list-item-body",onClick:P(r.conversation.id),onKeyDown:Object(i.a)(P(r.conversation.id)),role:"button",tabIndex:0},R?E.a.createElement(o.a,{size:"SMALL",className:"drift-widget-conversation-list-item-avatar",image:A.avatar}):E.a.createElement(c.a,{size:"SMALL",className:"drift-widget-conversation-list-item-avatar",image:L.avatarUrl,id:I,keyPrefix:C}),E.a.createElement("div",{className:"drift-widget-conversation-list-item-content"},E.a.createElement("h2",null,H),E.a.createElement("span",{className:"drift-widget-conversation-list-item-time"},U),E.a.createElement("p",{className:"drift-widget-conversation-list-item-last-message"},B.preview))))},S=a("DboL"),T=a("9xv8");a("PGb/"),t.a=function ConversationHistory(){var e=Object(l.a)().conversationHistoryOpen,t=Object(y.c)(function(e){return e.conversations.conversations}),a=Object(O.useMemo)(function(){var e;return null!==(e=Object(T.d)(Object(S.a)(t),"updatedAt"))&&void 0!==e?e:[]},[t]),n=Object(O.useMemo)(function(){return E.a.createElement("ul",{className:"drift-widget-conversation-history-list"},a.map(function(e){return E.a.createElement(k,{key:e.conversation.id,conversation:e})}))},[a]);return E.a.createElement("div",{className:r()("drift-widget-conversation-history",{"drift-widget-conversation-history--open":e}),"aria-hidden":!e},e&&n)}},yAze:function(e,t,a){},zJmF:function(e,t,a){"use strict";a.d(t,"a",function(){return Input});var n=a("jm9a"),r=a("hX/4"),i=a("O94r"),c=a.n(i),o=a("z24s"),s=a("ERkP"),l=a.n(s);a("BNKP");function Input(e){var t,a=e.className,i=void 0===a?"":a,d=e.shouldFocus,u=void 0===d||d,m=Object(r.a)(e,["className","shouldFocus"]),f=Object(s.useRef)(),g=Object(o.a)(f);return Object(s.useEffect)(function(){f.current&&u&&f.current.focus()},[u]),l.a.createElement("input",Object.assign({className:c()("drift-widget-input js-focus-visible--controlled",(t={},Object(n.a)(t,i,!!i),Object(n.a)(t,"keyboard-focused",g),t)),ref:f},m))}},zoZM:function(e,t,a){}}]);